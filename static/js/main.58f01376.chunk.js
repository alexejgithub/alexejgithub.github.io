(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(t,e,a){t.exports=a(20)},17:function(t,e,a){},20:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a(10),o=a(2),s=a(3),l=a(5),i=a(4),c=a(6),u=a(0),h=a.n(u),m=a(9),d=a.n(m),f=(a(17),a(7)),p=a.n(f),b=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(i.a)(e).call(this,t))).updateTitle=function(t){a.setState({titleKeyword:t.target.value})},a.createTitle=function(t){t.preventDefault(),""!==a.state.titleKeyword&&a.props.createTitle(a.state.titleKeyword),a.setState({titleKeyword:""})},a.state={titleKeyword:""},a}return Object(c.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this;return h.a.createElement("div",{className:"container wb"},h.a.createElement("div",{className:"row"},h.a.createElement("h3",null,"Title Query"),h.a.createElement("form",{onSubmit:this.createTitle},h.a.createElement("div",{className:"col-lg-12 input-group"},h.a.createElement("input",{type:"text",className:"center-block",placeholder:"Insert here...",value:this.state.titleKeyword,onChange:this.updateTitle}),h.a.createElement("button",{className:"btn btn-dark center-block"},"Add")))),h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-sm"},h.a.createElement("ul",{className:"list-group"},this.props.keywords.map(function(e){return h.a.createElement("li",{key:p()(),className:"hoverHighlight list-group-item"},e,h.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:function(a){return t.props.onDelete(e)}},h.a.createElement("span",{"aria-hidden":"true"},"\xd7")))})))))}}]),e}(h.a.Component),E=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(i.a)(e).call(this,t))).updateAuthor=function(t){a.setState({authorName:t.target.value})},a.createAuthor=function(t){t.preventDefault(),""!==a.state.authorName&&a.props.createAuthor(a.state.authorName),a.setState({authorName:""})},a.state={authorName:""},a}return Object(c.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this;return h.a.createElement("div",{className:"container wb"},h.a.createElement("div",{className:"row"},h.a.createElement("h3",null,"Author Query"),h.a.createElement("form",{onSubmit:this.createAuthor},h.a.createElement("div",{className:"col-lg-12 input-group"},h.a.createElement("input",{type:"text",className:"center-block",placeholder:"Insert here...",value:this.state.authorName,onChange:this.updateAuthor}),h.a.createElement("button",{className:"btn btn-dark center-block"},"Add")))),h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-sm"},h.a.createElement("ul",{className:"list-group"},this.props.authors.map(function(e){return h.a.createElement("li",{key:p()(),className:"hoverHighlight list-group-item"},e,h.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:function(a){return t.props.onDelete(e)}},h.a.createElement("span",{"aria-hidden":"true"},"\xd7")))})))))}}]),e}(h.a.Component),v=function(){return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"spinner-border",role:"status"},h.a.createElement("span",{className:"sr-only"},"Loading...")))},N=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(i.a)(e).call(this,t))).handleDeleteKeyword=function(t){a.setState(function(e){return{keywords:e.keywords.filter(function(e){return e!==t})}})},a.handleDeleteAuthor=function(t){a.setState(function(e){return{authors:e.authors.filter(function(e){return e!==t})}})},a.filterAuthors=function(){if(a.state.titleAuthorMap.size>0){var t=new Map(a.state.titleAuthorMap);a.state.authorHits.forEach(function(e){t.delete(e.info.author)});var e=!0,n=!1,o=void 0;try{for(var s,l=a.state.coAuthorMap.entries()[Symbol.iterator]();!(e=(s=l.next()).done);e=!0){var i=s.value,c=Object(r.a)(i,1)[0];t.delete(c)}}catch(u){n=!0,o=u}finally{try{e||null==l.return||l.return()}finally{if(n)throw o}}a.setState({titleAuthorMap:t})}},a.searchTitle=function(t){a.setState({isLoading:!0});var e=a.state.keywords.join("|");a.setState({titleHits:[]}),a.setState({hitsAmountTitles:0}),fetch("https://dblp.org/search/publ/api?q=".concat(e,"&h=1000&format=json")).then(function(t){return t.json()}).then(function(t){a.setState({isLoading:!1}),a.setState({hitsAmountTitles:t.result.hits["@total"]}),t.result.hits["@total"]>0&&(a.setState({titleHits:t.result.hits.hit}),a.createTitleAuthors())})},a.createTitleAuthors=function(){var t=new Map;a.setState({isLoading:!0}),a.state.titleHits.map(function(e){if(void 0!==e.info.authors)if(Array.isArray(e.info.authors.author))e.info.authors.author.forEach(function(e){var a=t.has(e)?t.get(e):0;t.set(e,1+a)});else{var a=t.has(e.info.authors.author)?t.get(e.info.authors.author):0;t.set(e.info.authors.author,1+a)}return!0}),t=new Map(Object(n.a)(t.entries()).sort(function(t,e){return e[1]-t[1]})),a.setState({titleAuthorMap:t}),a.setState({isLoading:!1})},a.createCoAuthorSet=function(){a.setState({isLoading:!0});var t=a.state.authorHits,e=new Set,r=new Map,o=t.map(function(t){return new Promise(function(a){fetch("".concat(t.info.url)).then(function(t){var n=t.url.split("/").slice(-2);e.add(n.join("/")),a()})})});a.setState({authorSet:e}),Promise.all(o).then(function(){var t=[];e.forEach(function(e){var a=fetch("https://dblp.uni-trier.de/pers/xc/".concat(e,".xml")).then(function(t){return t.text()}).then(function(t){return(new window.DOMParser).parseFromString(t,"text/xml")}).then(function(t){Object(n.a)(t.getElementsByTagName("author")).forEach(function(t){var e=t.getAttribute("count"),a=t.childNodes[0].nodeValue;if(e>2){var n=r.has(a)?r.get(a):0;r.set(a,1*e+n)}})});t.push(a)}),Promise.all(t).then(function(){r=new Map(Object(n.a)(r.entries()).sort(function(t,e){return e[1]-t[1]})),a.setState({isLoading:!1}),a.setState({coAuthorMap:r})})})},a.searchAuthors=function(t){a.setState({isLoading:!0}),a.setState({authorHits:[]}),a.setState({hitsAmountAuthors:0});var e=0,r=[],o=a.state.authors.map(function(t){return new Promise(function(a){fetch("https://dblp.org/search/author/api?q=".concat(t,"&h=1000&format=json")).then(function(t){t.json().then(function(t){t.result.hits.hit&&(e+=1*t.result.hits["@total"],r=[].concat(Object(n.a)(r),Object(n.a)(t.result.hits.hit)))}).then(function(){a()})})})});Promise.all(o).then(function(){console.log("done"),a.setState({isLoading:!1}),a.setState({hitsAmountAuthors:e}),a.setState({authorHits:r})})},a.handleCreateTitle=function(t){a.setState({keywords:[].concat(Object(n.a)(a.state.keywords),[t])})},a.handleCreateAuthor=function(t){a.setState({authors:[].concat(Object(n.a)(a.state.authors),[t])})},a.onDeleteFoundAuthor=function(t){a.setState(function(e){return{authorHits:e.authorHits.filter(function(e){return e.info.author!==t})}})},a.onDeleteCoAuthor=function(t){var e=new Map(a.state.coAuthorMap);e.delete(t),a.setState({coAuthorMap:e})},a.state={keywords:[],authors:[],titleHits:[],authorHits:[],hitsAmountTitles:0,hitsAmountAuthors:0,authorSet:new Set,coAuthorMap:new Map,titleAuthorMap:new Map,isLoading:!1},a}return Object(c.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this,e=this.state,a=e.titleAuthorMap,r=e.authorHits,o=e.coAuthorMap;return h.a.createElement("div",null,h.a.createElement("h2",{className:"text-center"}," Reviewer Finder ")," ",h.a.createElement("div",{className:"container"},h.a.createElement("div",{className:"row mt-3"},h.a.createElement("div",{className:"col-sm"},h.a.createElement(b,{keywords:this.state.keywords,onDelete:this.handleDeleteKeyword,createTitle:this.handleCreateTitle})," ")," ",h.a.createElement("div",{className:"col-sm"},h.a.createElement(E,{authors:this.state.authors,onDelete:this.handleDeleteAuthor,createAuthor:this.handleCreateAuthor})," ")," ")," ",h.a.createElement("div",{className:"row mt-3"},h.a.createElement("div",{className:"col-sm"}," ",h.a.createElement("button",{className:"btn btn-dark center-block",onClick:this.searchTitle},"Search Title"," ")," ")," ",h.a.createElement("div",{className:"col-sm"},h.a.createElement("button",{className:"btn btn-dark center-block",onClick:this.searchAuthors},"Search Author"," ")," ")," ")," ",h.a.createElement("div",{className:"row mt-3 justify-content-center"}," ",this.state.isLoading&&h.a.createElement(v,null)," ")," ",h.a.createElement("div",{className:"row mt-3 "},h.a.createElement("div",{className:"col-sm"},"Title hits: ",this.state.hitsAmountTitles," ",h.a.createElement("br",null))," ",h.a.createElement("div",{className:"col-sm"},"Author hits: ",this.state.hitsAmountAuthors," ",h.a.createElement("br",null),h.a.createElement("ul",{className:"list-group"}," ",r.slice(0,20).map(function(e){return h.a.createElement("li",{className:"hoverHighlight list-group-item",key:e.url},e.info.author,h.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:function(a){return t.onDeleteFoundAuthor(e.info.author)}},h.a.createElement("span",{"aria-hidden":"true"},"\xd7")))})," ")," ")," ")," ",h.a.createElement("div",{className:"row mt-3"},h.a.createElement("div",{className:"col-sm"}," ",h.a.createElement("button",{className:"btn btn-dark center-block",onClick:this.filterAuthors},"Filter Authors "," ")," ",h.a.createElement("div",{className:"col-sm mt-3"},h.a.createElement("ul",{className:"list-group"}," ",Object(n.a)(a).slice(0,20).map(function(e){return h.a.createElement("li",{className:"hoverHighlight list-group-item",key:e},e[0]," ",e[1],h.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:function(a){return t.onDeleteCoAuthor(e[0])}},h.a.createElement("span",{"aria-hidden":"true"},"\xd7")))})," ")," ")," ")," ",h.a.createElement("div",{className:"col-sm"},h.a.createElement("button",{className:"btn btn-dark center-block",onClick:this.createCoAuthorSet},"Find Co-Authors"," ")," ",h.a.createElement("br",null),h.a.createElement("div",{className:"col-sm mt-3"},h.a.createElement("ul",{className:"list-group"}," ",Object(n.a)(o).slice(0,20).map(function(e){return h.a.createElement("li",{className:"hoverHighlight list-group-item",key:e},e[0]," ",e[1],h.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:function(a){return t.onDeleteCoAuthor(e[0])}},h.a.createElement("span",{"aria-hidden":"true"},"\xd7")))})," ")," ")," ")," ")," ")," ")}}]),e}(h.a.Component);d.a.render(h.a.createElement(N,null),document.getElementById("reactContainer"))}},[[11,1,2]]]);
//# sourceMappingURL=main.58f01376.chunk.js.map